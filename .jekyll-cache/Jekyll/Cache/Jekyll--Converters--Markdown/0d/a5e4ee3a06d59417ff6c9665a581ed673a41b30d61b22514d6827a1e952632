I"◊<h1 id="intro">Intro</h1>
<p>Ubuntu does not play nice with hardware. Especially Nvidia graphics. The X550V Asus laptop comes with a Nvidia GeForce GTX 950M card. In addition, something about PCIE seems to mess things up during the install. I found <a href="https://bugs.launchpad.net/ubuntu/+source/ubiquity/+bug/1767594">this</a> bug, but that only solved my graphics problem. I still had locked CPUs, screens upon screens of PCIE errors, and frozen screens after log in. All it took were a few grub flags and it worked just fine.</p>
<h1 id="install-ubuntu">Install Ubuntu</h1>
<p>For the installation, make sure to edit the boot flags. Replace <code>quiet splash</code> with <code>nomodeset acpi=force intel_idle.max_cstate=1 pci=nomsi pcie_aspm=off</code>. Then run your installation as normal and reboot. This time add <code>nouveau.modeset=0 acpi=force intel_idle.max_cstate=1 pci=nomsi pcie_aspm=off</code> the end of the line that starts with <em>linux</em>. Your laptop should boot without issue. Once logged in modify the file <code>/etc/default/grub</code> so it reads:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">GRUB_CMDLINE_LINUX_DEFAULT=</span><span class="st">&quot;quiet splash acpi=force intel_idle.max_cstate=1 pci=nomsi pcie_aspm=off&quot;</span></code></pre></div>
<p>Then update grub <code>sudo update-grub</code>. Go to the ‚Äúadditional drivers‚Äù tab of <em>Software and Updates</em> and select the appropriate Nvidia driver for your card. As of this writing, it is nvidia-driver-390. Save the changes and reboot. There you have it. You should have a fully functioning system now with the latest Nvidia driver. <strong>Note</strong>: I have no idea why those grub flags work or even what they do. This worked for me, and that‚Äôs the only guarantee I make.</p>
<h1 id="other-flags">Other Flags</h1>
<p>I tried quite a few flags and combinations during my attempted install of Qubes:</p>
<pre><code>video=vesa:off
inst.text
nouveau.modeset=0
rhgb
rd.driver.blacklist=noveau
nouveau.noaccel=1</code></pre>
<h1 id="update-oct-2020">Update Oct 2020</h1>
<p>So I had some problems with grub and I had to erase it. And with it, went all the boot flags.</p>
<p>After fiddling for quite some time I finally got my laptop to work again. Here is a brief description of what I had to do.</p>
<p>First I booted to the latest firmware and selected recovery mode. I altered the boot flags to include:</p>
<pre><code>nouveau.modeset=0 acpi=force intel_idle.max_cstate=1 pci=nomsi pcie_aspm=off nvidia-drm.modeset=1</code></pre>
<p>For some reason, the hard drive wasn‚Äôt mounting properly when I went through the usual automatic methods. So I immediately selected ‚Äúdrop to command line‚Äù and mounted manually:</p>
<pre><code>cryptsetup luksOpen /dev/sda3 ubuntu-mapper-vg</code></pre>
<p>I‚Äôm not sure that this did anything since I used the wrong name and it still worked.</p>
<pre><code>mount /dev/mapper/ubuntu--vg-root /
exit</code></pre>
<p><em>Enable Networking</em> from the recovery menu. Then reenter command line.</p>
<p>My drive still said 0% space. I believe there is a error message file or some archive somewhere that is the cause of the full drive. But I couldn‚Äôt locate it, so I just deleted some old files to make enough room to update.</p>
<pre><code>apt update &amp;&amp; apt upgrade</code></pre>
<p>There‚Äôs always problems with nvidia, so I updated those as well.</p>
<pre><code>ubuntudrivers autoinstall</code></pre>
<p>I took the opportunity to modify grub as well:</p>
<pre><code>nano /etc/default/grub</code></pre>
<p>I used the same boot flags listed above.</p>
<p>Then update grub and reboot.</p>
<pre><code>update-grub
reboot</code></pre>
<p>And everything is right with the world again.</p>
:ET